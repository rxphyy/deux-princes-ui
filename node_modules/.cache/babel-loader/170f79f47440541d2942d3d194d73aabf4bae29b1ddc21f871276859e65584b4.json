{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RenameOperation = void 0;\nconst collection_1 = require(\"../collection\");\nconst utils_1 = require(\"../utils\");\nconst command_1 = require(\"./command\");\nconst operation_1 = require(\"./operation\");\n/** @internal */\nclass RenameOperation extends command_1.CommandOperation {\n  constructor(collection, newName, options) {\n    (0, utils_1.checkCollectionName)(newName);\n    super(collection, options);\n    this.collection = collection;\n    this.newName = newName;\n    this.options = options;\n    this.ns = new utils_1.MongoDBNamespace('admin', '$cmd');\n  }\n  async execute(server, session) {\n    // Build the command\n    const renameCollection = this.collection.namespace;\n    const toCollection = this.collection.s.namespace.withCollection(this.newName).toString();\n    const dropTarget = typeof this.options.dropTarget === 'boolean' ? this.options.dropTarget : false;\n    const command = {\n      renameCollection: renameCollection,\n      to: toCollection,\n      dropTarget: dropTarget\n    };\n    await super.executeCommand(server, session, command);\n    return new collection_1.Collection(this.collection.s.db, this.newName, this.collection.s.options);\n  }\n}\nexports.RenameOperation = RenameOperation;\n(0, operation_1.defineAspects)(RenameOperation, [operation_1.Aspect.WRITE_OPERATION]);","map":{"version":3,"names":["collection_1","require","utils_1","command_1","operation_1","RenameOperation","CommandOperation","constructor","collection","newName","options","checkCollectionName","ns","MongoDBNamespace","execute","server","session","renameCollection","namespace","toCollection","s","withCollection","toString","dropTarget","command","to","executeCommand","Collection","db","exports","defineAspects","Aspect","WRITE_OPERATION"],"sources":["C:\\Users\\raphm\\Documents\\Projects\\youtube-transcript\\youtube-transcript\\node_modules\\mongodb\\src\\operations\\rename.ts"],"sourcesContent":["import type { Document } from '../bson';\nimport { Collection } from '../collection';\nimport type { Server } from '../sdam/server';\nimport type { ClientSession } from '../sessions';\nimport { checkCollectionName, MongoDBNamespace } from '../utils';\nimport { CommandOperation, type CommandOperationOptions } from './command';\nimport { Aspect, defineAspects } from './operation';\n\n/** @public */\nexport interface RenameOptions extends CommandOperationOptions {\n  /** Drop the target name collection if it previously exists. */\n  dropTarget?: boolean;\n  /** Unclear */\n  new_collection?: boolean;\n}\n\n/** @internal */\nexport class RenameOperation extends CommandOperation<Document> {\n  constructor(\n    public collection: Collection,\n    public newName: string,\n    public override options: RenameOptions\n  ) {\n    checkCollectionName(newName);\n    super(collection, options);\n    this.ns = new MongoDBNamespace('admin', '$cmd');\n  }\n\n  override async execute(server: Server, session: ClientSession | undefined): Promise<Collection> {\n    // Build the command\n    const renameCollection = this.collection.namespace;\n    const toCollection = this.collection.s.namespace.withCollection(this.newName).toString();\n    const dropTarget =\n      typeof this.options.dropTarget === 'boolean' ? this.options.dropTarget : false;\n\n    const command = {\n      renameCollection: renameCollection,\n      to: toCollection,\n      dropTarget: dropTarget\n    };\n\n    await super.executeCommand(server, session, command);\n    return new Collection(this.collection.s.db, this.newName, this.collection.s.options);\n  }\n}\n\ndefineAspects(RenameOperation, [Aspect.WRITE_OPERATION]);\n"],"mappings":";;;;;;AACA,MAAAA,YAAA,GAAAC,OAAA;AAGA,MAAAC,OAAA,GAAAD,OAAA;AACA,MAAAE,SAAA,GAAAF,OAAA;AACA,MAAAG,WAAA,GAAAH,OAAA;AAUA;AACA,MAAaI,eAAgB,SAAQF,SAAA,CAAAG,gBAA0B;EAC7DC,YACSC,UAAsB,EACtBC,OAAe,EACNC,OAAsB;IAEtC,IAAAR,OAAA,CAAAS,mBAAmB,EAACF,OAAO,CAAC;IAC5B,KAAK,CAACD,UAAU,EAAEE,OAAO,CAAC;IALnB,KAAAF,UAAU,GAAVA,UAAU;IACV,KAAAC,OAAO,GAAPA,OAAO;IACE,KAAAC,OAAO,GAAPA,OAAO;IAIvB,IAAI,CAACE,EAAE,GAAG,IAAIV,OAAA,CAAAW,gBAAgB,CAAC,OAAO,EAAE,MAAM,CAAC;EACjD;EAES,MAAMC,OAAOA,CAACC,MAAc,EAAEC,OAAkC;IACvE;IACA,MAAMC,gBAAgB,GAAG,IAAI,CAACT,UAAU,CAACU,SAAS;IAClD,MAAMC,YAAY,GAAG,IAAI,CAACX,UAAU,CAACY,CAAC,CAACF,SAAS,CAACG,cAAc,CAAC,IAAI,CAACZ,OAAO,CAAC,CAACa,QAAQ,EAAE;IACxF,MAAMC,UAAU,GACd,OAAO,IAAI,CAACb,OAAO,CAACa,UAAU,KAAK,SAAS,GAAG,IAAI,CAACb,OAAO,CAACa,UAAU,GAAG,KAAK;IAEhF,MAAMC,OAAO,GAAG;MACdP,gBAAgB,EAAEA,gBAAgB;MAClCQ,EAAE,EAAEN,YAAY;MAChBI,UAAU,EAAEA;KACb;IAED,MAAM,KAAK,CAACG,cAAc,CAACX,MAAM,EAAEC,OAAO,EAAEQ,OAAO,CAAC;IACpD,OAAO,IAAIxB,YAAA,CAAA2B,UAAU,CAAC,IAAI,CAACnB,UAAU,CAACY,CAAC,CAACQ,EAAE,EAAE,IAAI,CAACnB,OAAO,EAAE,IAAI,CAACD,UAAU,CAACY,CAAC,CAACV,OAAO,CAAC;EACtF;;AA1BFmB,OAAA,CAAAxB,eAAA,GAAAA,eAAA;AA6BA,IAAAD,WAAA,CAAA0B,aAAa,EAACzB,eAAe,EAAE,CAACD,WAAA,CAAA2B,MAAM,CAACC,eAAe,CAAC,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}