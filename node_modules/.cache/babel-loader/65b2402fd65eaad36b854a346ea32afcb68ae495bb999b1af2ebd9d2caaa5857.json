{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _classCallCheck = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _get = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/get.js\").default;\nvar _getPrototypeOf = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/getPrototypeOf.js\").default;\nvar _inherits = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CountOperation = void 0;\nvar command_1 = require(\"./command\");\nvar operation_1 = require(\"./operation\");\n/** @internal */\nvar CountOperation = /*#__PURE__*/function (_command_1$CommandOpe) {\n  _inherits(CountOperation, _command_1$CommandOpe);\n  var _super = _createSuper(CountOperation);\n  function CountOperation(namespace, filter, options) {\n    var _this;\n    _classCallCheck(this, CountOperation);\n    _this = _super.call(this, {\n      s: {\n        namespace: namespace\n      }\n    }, options);\n    _this.options = options;\n    _this.collectionName = namespace.collection;\n    _this.query = filter;\n    return _this;\n  }\n  _createClass(CountOperation, [{\n    key: \"execute\",\n    value: function () {\n      var _execute = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(server, session) {\n        var options, cmd, result;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              options = this.options;\n              cmd = {\n                count: this.collectionName,\n                query: this.query\n              };\n              if (typeof options.limit === 'number') {\n                cmd.limit = options.limit;\n              }\n              if (typeof options.skip === 'number') {\n                cmd.skip = options.skip;\n              }\n              if (options.hint != null) {\n                cmd.hint = options.hint;\n              }\n              if (typeof options.maxTimeMS === 'number') {\n                cmd.maxTimeMS = options.maxTimeMS;\n              }\n              _context.next = 8;\n              return _get(_getPrototypeOf(CountOperation.prototype), \"executeCommand\", this).call(this, server, session, cmd);\n            case 8:\n              result = _context.sent;\n              return _context.abrupt(\"return\", result ? result.n : 0);\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function execute(_x, _x2) {\n        return _execute.apply(this, arguments);\n      }\n      return execute;\n    }()\n  }]);\n  return CountOperation;\n}(command_1.CommandOperation);\nexports.CountOperation = CountOperation;\n(0, operation_1.defineAspects)(CountOperation, [operation_1.Aspect.READ_OPERATION, operation_1.Aspect.RETRYABLE]);","map":{"version":3,"names":["command_1","require","operation_1","CountOperation","_command_1$CommandOpe","_inherits","_super","_createSuper","namespace","filter","options","_this","_classCallCheck","call","s","collectionName","collection","query","_createClass","key","value","_execute","_asyncToGenerator","_regeneratorRuntime","mark","_callee","server","session","cmd","result","wrap","_callee$","_context","prev","next","count","limit","skip","hint","maxTimeMS","_get","_getPrototypeOf","prototype","sent","abrupt","n","stop","execute","_x","_x2","apply","arguments","CommandOperation","exports","defineAspects","Aspect","READ_OPERATION","RETRYABLE"],"sources":["C:\\Users\\raphm\\Documents\\Projects\\youtube-transcript\\youtube-transcript\\node_modules\\mongodb\\src\\operations\\count.ts"],"sourcesContent":["import type { Document } from '../bson';\nimport type { Collection } from '../collection';\nimport type { Server } from '../sdam/server';\nimport type { ClientSession } from '../sessions';\nimport type { MongoDBNamespace } from '../utils';\nimport { CommandOperation, type CommandOperationOptions } from './command';\nimport { Aspect, defineAspects } from './operation';\n\n/** @public */\nexport interface CountOptions extends CommandOperationOptions {\n  /** The number of documents to skip. */\n  skip?: number;\n  /** The maximum amounts to count before aborting. */\n  limit?: number;\n  /** Number of milliseconds to wait before aborting the query. */\n  maxTimeMS?: number;\n  /** An index name hint for the query. */\n  hint?: string | Document;\n}\n\n/** @internal */\nexport class CountOperation extends CommandOperation<number> {\n  override options: CountOptions;\n  collectionName?: string;\n  query: Document;\n\n  constructor(namespace: MongoDBNamespace, filter: Document, options: CountOptions) {\n    super({ s: { namespace: namespace } } as unknown as Collection, options);\n\n    this.options = options;\n    this.collectionName = namespace.collection;\n    this.query = filter;\n  }\n\n  override async execute(server: Server, session: ClientSession | undefined): Promise<number> {\n    const options = this.options;\n    const cmd: Document = {\n      count: this.collectionName,\n      query: this.query\n    };\n\n    if (typeof options.limit === 'number') {\n      cmd.limit = options.limit;\n    }\n\n    if (typeof options.skip === 'number') {\n      cmd.skip = options.skip;\n    }\n\n    if (options.hint != null) {\n      cmd.hint = options.hint;\n    }\n\n    if (typeof options.maxTimeMS === 'number') {\n      cmd.maxTimeMS = options.maxTimeMS;\n    }\n\n    const result = await super.executeCommand(server, session, cmd);\n    return result ? result.n : 0;\n  }\n}\n\ndefineAspects(CountOperation, [Aspect.READ_OPERATION, Aspect.RETRYABLE]);\n"],"mappings":";;;;;;;;;;;;;;AAKA,IAAAA,SAAA,GAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AAcA;AAAA,IACaE,cAAe,0BAAAC,qBAAA;EAAAC,SAAA,CAAAF,cAAA,EAAAC,qBAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,cAAA;EAK1B,SAAAA,eAAYK,SAA2B,EAAEC,MAAgB,EAAEC,OAAqB;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAT,cAAA;IAC9EQ,KAAA,GAAAL,MAAA,CAAAO,IAAA,OAAM;MAAEC,CAAC,EAAE;QAAEN,SAAS,EAAEA;MAAS;IAAE,CAA2B,EAAEE,OAAO;IAEvEC,KAAA,CAAKD,OAAO,GAAGA,OAAO;IACtBC,KAAA,CAAKI,cAAc,GAAGP,SAAS,CAACQ,UAAU;IAC1CL,KAAA,CAAKM,KAAK,GAAGR,MAAM;IAAC,OAAAE,KAAA;EACtB;EAACO,YAAA,CAAAf,cAAA;IAAAgB,GAAA;IAAAC,KAAA;MAAA,IAAAC,QAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAEQ,SAAAC,QAAcC,MAAc,EAAEC,OAAkC;QAAA,IAAAjB,OAAA,EAAAkB,GAAA,EAAAC,MAAA;QAAA,OAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACjExB,OAAO,GAAG,IAAI,CAACA,OAAO;cACtBkB,GAAG,GAAa;gBACpBO,KAAK,EAAE,IAAI,CAACpB,cAAc;gBAC1BE,KAAK,EAAE,IAAI,CAACA;eACb;cAED,IAAI,OAAOP,OAAO,CAAC0B,KAAK,KAAK,QAAQ,EAAE;gBACrCR,GAAG,CAACQ,KAAK,GAAG1B,OAAO,CAAC0B,KAAK;;cAG3B,IAAI,OAAO1B,OAAO,CAAC2B,IAAI,KAAK,QAAQ,EAAE;gBACpCT,GAAG,CAACS,IAAI,GAAG3B,OAAO,CAAC2B,IAAI;;cAGzB,IAAI3B,OAAO,CAAC4B,IAAI,IAAI,IAAI,EAAE;gBACxBV,GAAG,CAACU,IAAI,GAAG5B,OAAO,CAAC4B,IAAI;;cAGzB,IAAI,OAAO5B,OAAO,CAAC6B,SAAS,KAAK,QAAQ,EAAE;gBACzCX,GAAG,CAACW,SAAS,GAAG7B,OAAO,CAAC6B,SAAS;;cAClCP,QAAA,CAAAE,IAAA;cAAA,OAAAM,IAAA,CAAAC,eAAA,CAAAtC,cAAA,CAAAuC,SAAA,2BAAA7B,IAAA,OAEyCa,MAAM,EAAEC,OAAO,EAAEC,GAAG;YAAA;cAAxDC,MAAM,GAAAG,QAAA,CAAAW,IAAA;cAAA,OAAAX,QAAA,CAAAY,MAAA,WACLf,MAAM,GAAGA,MAAM,CAACgB,CAAC,GAAG,CAAC;YAAA;YAAA;cAAA,OAAAb,QAAA,CAAAc,IAAA;UAAA;QAAA,GAAArB,OAAA;MAAA,CAC7B;MAAA,SAAAsB,QAAAC,EAAA,EAAAC,GAAA;QAAA,OAAA5B,QAAA,CAAA6B,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAJ,OAAA;IAAA;EAAA;EAAA,OAAA5C,cAAA;AAAA,EAtCiCH,SAAA,CAAAoD,gBAAwB;AAA5DC,OAAA,CAAAlD,cAAA,GAAAA,cAAA;AAyCA,IAAAD,WAAA,CAAAoD,aAAa,EAACnD,cAAc,EAAE,CAACD,WAAA,CAAAqD,MAAM,CAACC,cAAc,EAAEtD,WAAA,CAAAqD,MAAM,CAACE,SAAS,CAAC,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}