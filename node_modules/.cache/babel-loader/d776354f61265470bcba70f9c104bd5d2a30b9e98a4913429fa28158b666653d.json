{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getMongoDBClientEncryption = exports.aws4 = exports.getSocks = exports.getSnappy = exports.getGcpMetadata = exports.getAwsCredentialProvider = exports.getZstdLibrary = exports.ZStandard = exports.getKerberos = exports.Kerberos = void 0;\nconst error_1 = require(\"./error\");\nfunction makeErrorModule(error) {\n  const props = error ? {\n    kModuleError: error\n  } : {};\n  return new Proxy(props, {\n    get: (_, key) => {\n      if (key === 'kModuleError') {\n        return error;\n      }\n      throw error;\n    },\n    set: () => {\n      throw error;\n    }\n  });\n}\nexports.Kerberos = makeErrorModule(new error_1.MongoMissingDependencyError('Optional module `kerberos` not found. Please install it to enable kerberos authentication'));\nfunction getKerberos() {\n  try {\n    // Ensure you always wrap an optional require in the try block NODE-3199\n    exports.Kerberos = require('kerberos');\n    return exports.Kerberos;\n  } catch {\n    return exports.Kerberos;\n  }\n}\nexports.getKerberos = getKerberos;\nexports.ZStandard = makeErrorModule(new error_1.MongoMissingDependencyError('Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression'));\nfunction getZstdLibrary() {\n  try {\n    exports.ZStandard = require('@mongodb-js/zstd');\n    return exports.ZStandard;\n  } catch {\n    return exports.ZStandard;\n  }\n}\nexports.getZstdLibrary = getZstdLibrary;\nfunction getAwsCredentialProvider() {\n  try {\n    // Ensure you always wrap an optional require in the try block NODE-3199\n    const credentialProvider = require('@aws-sdk/credential-providers');\n    return credentialProvider;\n  } catch {\n    return makeErrorModule(new error_1.MongoMissingDependencyError('Optional module `@aws-sdk/credential-providers` not found.' + ' Please install it to enable getting aws credentials via the official sdk.'));\n  }\n}\nexports.getAwsCredentialProvider = getAwsCredentialProvider;\nfunction getGcpMetadata() {\n  try {\n    // Ensure you always wrap an optional require in the try block NODE-3199\n    const credentialProvider = require('gcp-metadata');\n    return credentialProvider;\n  } catch {\n    return makeErrorModule(new error_1.MongoMissingDependencyError('Optional module `gcp-metadata` not found.' + ' Please install it to enable getting gcp credentials via the official sdk.'));\n  }\n}\nexports.getGcpMetadata = getGcpMetadata;\nfunction getSnappy() {\n  try {\n    // Ensure you always wrap an optional require in the try block NODE-3199\n    const value = require('snappy');\n    return value;\n  } catch (cause) {\n    const kModuleError = new error_1.MongoMissingDependencyError('Optional module `snappy` not found. Please install it to enable snappy compression', {\n      cause\n    });\n    return {\n      kModuleError\n    };\n  }\n}\nexports.getSnappy = getSnappy;\nfunction getSocks() {\n  try {\n    // Ensure you always wrap an optional require in the try block NODE-3199\n    const value = require('socks');\n    return value;\n  } catch (cause) {\n    const kModuleError = new error_1.MongoMissingDependencyError('Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy', {\n      cause\n    });\n    return {\n      kModuleError\n    };\n  }\n}\nexports.getSocks = getSocks;\nexports.aws4 = makeErrorModule(new error_1.MongoMissingDependencyError('Optional module `aws4` not found. Please install it to enable AWS authentication'));\ntry {\n  // Ensure you always wrap an optional require in the try block NODE-3199\n  exports.aws4 = require('aws4');\n} catch {} // eslint-disable-line\n/** A utility function to get the instance of mongodb-client-encryption, if it exists. */\nfunction getMongoDBClientEncryption() {\n  let mongodbClientEncryption = null;\n  try {\n    // NOTE(NODE-3199): Ensure you always wrap an optional require literally in the try block\n    // Cannot be moved to helper utility function, bundlers search and replace the actual require call\n    // in a way that makes this line throw at bundle time, not runtime, catching here will make bundling succeed\n    mongodbClientEncryption = require('mongodb-client-encryption');\n  } catch (cause) {\n    const kModuleError = new error_1.MongoMissingDependencyError('Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.', {\n      cause\n    });\n    return {\n      kModuleError\n    };\n  }\n  return mongodbClientEncryption;\n}\nexports.getMongoDBClientEncryption = getMongoDBClientEncryption;","map":{"version":3,"names":["error_1","require","makeErrorModule","error","props","kModuleError","Proxy","get","_","key","set","exports","Kerberos","MongoMissingDependencyError","getKerberos","ZStandard","getZstdLibrary","getAwsCredentialProvider","credentialProvider","getGcpMetadata","getSnappy","value","cause","getSocks","aws4","getMongoDBClientEncryption","mongodbClientEncryption"],"sources":["C:\\Users\\raphm\\Documents\\Projects\\youtube-transcript\\youtube-transcript\\node_modules\\mongodb\\src\\deps.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-var-requires */\nimport { type Stream } from './cmap/connect';\nimport { MongoMissingDependencyError } from './error';\nimport type { Callback } from './utils';\n\nfunction makeErrorModule(error: any) {\n  const props = error ? { kModuleError: error } : {};\n  return new Proxy(props, {\n    get: (_: any, key: any) => {\n      if (key === 'kModuleError') {\n        return error;\n      }\n      throw error;\n    },\n    set: () => {\n      throw error;\n    }\n  });\n}\n\nexport let Kerberos: typeof import('kerberos') | { kModuleError: MongoMissingDependencyError } =\n  makeErrorModule(\n    new MongoMissingDependencyError(\n      'Optional module `kerberos` not found. Please install it to enable kerberos authentication'\n    )\n  );\n\nexport function getKerberos(): typeof Kerberos | { kModuleError: MongoMissingDependencyError } {\n  try {\n    // Ensure you always wrap an optional require in the try block NODE-3199\n    Kerberos = require('kerberos');\n    return Kerberos;\n  } catch {\n    return Kerberos;\n  }\n}\n\nexport interface KerberosClient {\n  step(challenge: string): Promise<string>;\n  step(challenge: string, callback: Callback<string>): void;\n  wrap(challenge: string, options: { user: string }): Promise<string>;\n  wrap(challenge: string, options: { user: string }, callback: Callback<string>): void;\n  unwrap(challenge: string): Promise<string>;\n  unwrap(challenge: string, callback: Callback<string>): void;\n}\n\ntype ZStandardLib = {\n  /**\n   * Compress using zstd.\n   * @param buf - Buffer to be compressed.\n   */\n  compress(buf: Buffer, level?: number): Promise<Buffer>;\n\n  /**\n   * Decompress using zstd.\n   */\n  decompress(buf: Buffer): Promise<Buffer>;\n};\n\nexport let ZStandard: ZStandardLib | { kModuleError: MongoMissingDependencyError } =\n  makeErrorModule(\n    new MongoMissingDependencyError(\n      'Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression'\n    )\n  );\n\nexport function getZstdLibrary(): typeof ZStandard | { kModuleError: MongoMissingDependencyError } {\n  try {\n    ZStandard = require('@mongodb-js/zstd');\n    return ZStandard;\n  } catch {\n    return ZStandard;\n  }\n}\n\n/**\n * @internal\n * Copy of the AwsCredentialIdentityProvider interface from [`smithy/types`](https://socket.dev/npm/package/\\@smithy/types/files/1.1.1/dist-types/identity/awsCredentialIdentity.d.ts),\n * the return type of the aws-sdk's `fromNodeProviderChain().provider()`.\n */\nexport interface AWSCredentials {\n  accessKeyId: string;\n  secretAccessKey: string;\n  sessionToken: string;\n  expiration?: Date;\n}\n\ntype CredentialProvider = {\n  fromNodeProviderChain(\n    this: void,\n    options: { clientConfig: { region: string } }\n  ): () => Promise<AWSCredentials>;\n  fromNodeProviderChain(this: void): () => Promise<AWSCredentials>;\n};\n\nexport function getAwsCredentialProvider():\n  | CredentialProvider\n  | { kModuleError: MongoMissingDependencyError } {\n  try {\n    // Ensure you always wrap an optional require in the try block NODE-3199\n    const credentialProvider = require('@aws-sdk/credential-providers');\n    return credentialProvider;\n  } catch {\n    return makeErrorModule(\n      new MongoMissingDependencyError(\n        'Optional module `@aws-sdk/credential-providers` not found.' +\n          ' Please install it to enable getting aws credentials via the official sdk.'\n      )\n    );\n  }\n}\n\n/** @internal */\nexport type GcpMetadata =\n  | typeof import('gcp-metadata')\n  | { kModuleError: MongoMissingDependencyError };\n\nexport function getGcpMetadata(): GcpMetadata {\n  try {\n    // Ensure you always wrap an optional require in the try block NODE-3199\n    const credentialProvider = require('gcp-metadata');\n    return credentialProvider;\n  } catch {\n    return makeErrorModule(\n      new MongoMissingDependencyError(\n        'Optional module `gcp-metadata` not found.' +\n          ' Please install it to enable getting gcp credentials via the official sdk.'\n      )\n    );\n  }\n}\n\n/** @internal */\nexport type SnappyLib = {\n  /**\n   * In order to support both we must check the return value of the function\n   * @param buf - Buffer to be compressed\n   */\n  compress(buf: Buffer): Promise<Buffer>;\n\n  /**\n   * In order to support both we must check the return value of the function\n   * @param buf - Buffer to be compressed\n   */\n  uncompress(buf: Buffer, opt: { asBuffer: true }): Promise<Buffer>;\n};\n\nexport function getSnappy(): SnappyLib | { kModuleError: MongoMissingDependencyError } {\n  try {\n    // Ensure you always wrap an optional require in the try block NODE-3199\n    const value = require('snappy');\n    return value;\n  } catch (cause) {\n    const kModuleError = new MongoMissingDependencyError(\n      'Optional module `snappy` not found. Please install it to enable snappy compression',\n      { cause }\n    );\n    return { kModuleError };\n  }\n}\n\nexport type SocksLib = {\n  SocksClient: {\n    createConnection(options: {\n      command: 'connect';\n      destination: { host: string; port: number };\n      proxy: {\n        /** host and port are ignored because we pass existing_socket */\n        host: 'iLoveJavaScript';\n        port: 0;\n        type: 5;\n        userId?: string;\n        password?: string;\n      };\n      timeout?: number;\n      /** We always create our own socket, and pass it to this API for proxy negotiation */\n      existing_socket: Stream;\n    }): Promise<{ socket: Stream }>;\n  };\n};\n\nexport function getSocks(): SocksLib | { kModuleError: MongoMissingDependencyError } {\n  try {\n    // Ensure you always wrap an optional require in the try block NODE-3199\n    const value = require('socks');\n    return value;\n  } catch (cause) {\n    const kModuleError = new MongoMissingDependencyError(\n      'Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy',\n      { cause }\n    );\n    return { kModuleError };\n  }\n}\n\ninterface AWS4 {\n  /**\n   * Created these inline types to better assert future usage of this API\n   * @param options - options for request\n   * @param credentials - AWS credential details, sessionToken should be omitted entirely if its false-y\n   */\n  sign(\n    this: void,\n    options: {\n      path: '/';\n      body: string;\n      host: string;\n      method: 'POST';\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded';\n        'Content-Length': number;\n        'X-MongoDB-Server-Nonce': string;\n        'X-MongoDB-GS2-CB-Flag': 'n';\n      };\n      service: string;\n      region: string;\n    },\n    credentials:\n      | {\n          accessKeyId: string;\n          secretAccessKey: string;\n          sessionToken: string;\n        }\n      | {\n          accessKeyId: string;\n          secretAccessKey: string;\n        }\n      | undefined\n  ): {\n    headers: {\n      Authorization: string;\n      'X-Amz-Date': string;\n    };\n  };\n}\n\nexport let aws4: AWS4 | { kModuleError: MongoMissingDependencyError } = makeErrorModule(\n  new MongoMissingDependencyError(\n    'Optional module `aws4` not found. Please install it to enable AWS authentication'\n  )\n);\n\ntry {\n  // Ensure you always wrap an optional require in the try block NODE-3199\n  aws4 = require('aws4');\n} catch {} // eslint-disable-line\n\n/** A utility function to get the instance of mongodb-client-encryption, if it exists. */\nexport function getMongoDBClientEncryption():\n  | typeof import('mongodb-client-encryption')\n  | { kModuleError: MongoMissingDependencyError } {\n  let mongodbClientEncryption = null;\n\n  try {\n    // NOTE(NODE-3199): Ensure you always wrap an optional require literally in the try block\n    // Cannot be moved to helper utility function, bundlers search and replace the actual require call\n    // in a way that makes this line throw at bundle time, not runtime, catching here will make bundling succeed\n    mongodbClientEncryption = require('mongodb-client-encryption');\n  } catch (cause) {\n    const kModuleError = new MongoMissingDependencyError(\n      'Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.',\n      { cause }\n    );\n    return { kModuleError };\n  }\n\n  return mongodbClientEncryption;\n}\n"],"mappings":";;;;;;AAEA,MAAAA,OAAA,GAAAC,OAAA;AAGA,SAASC,eAAeA,CAACC,KAAU;EACjC,MAAMC,KAAK,GAAGD,KAAK,GAAG;IAAEE,YAAY,EAAEF;EAAK,CAAE,GAAG,EAAE;EAClD,OAAO,IAAIG,KAAK,CAACF,KAAK,EAAE;IACtBG,GAAG,EAAEA,CAACC,CAAM,EAAEC,GAAQ,KAAI;MACxB,IAAIA,GAAG,KAAK,cAAc,EAAE;QAC1B,OAAON,KAAK;;MAEd,MAAMA,KAAK;IACb,CAAC;IACDO,GAAG,EAAEA,CAAA,KAAK;MACR,MAAMP,KAAK;IACb;GACD,CAAC;AACJ;AAEWQ,OAAA,CAAAC,QAAQ,GACjBV,eAAe,CACb,IAAIF,OAAA,CAAAa,2BAA2B,CAC7B,2FAA2F,CAC5F,CACF;AAEH,SAAgBC,WAAWA,CAAA;EACzB,IAAI;IACF;IACAH,OAAA,CAAAC,QAAQ,GAAGX,OAAO,CAAC,UAAU,CAAC;IAC9B,OAAOU,OAAA,CAAAC,QAAQ;GAChB,CAAC,MAAM;IACN,OAAOD,OAAA,CAAAC,QAAQ;;AAEnB;AARAD,OAAA,CAAAG,WAAA,GAAAA,WAAA;AAgCWH,OAAA,CAAAI,SAAS,GAClBb,eAAe,CACb,IAAIF,OAAA,CAAAa,2BAA2B,CAC7B,4FAA4F,CAC7F,CACF;AAEH,SAAgBG,cAAcA,CAAA;EAC5B,IAAI;IACFL,OAAA,CAAAI,SAAS,GAAGd,OAAO,CAAC,kBAAkB,CAAC;IACvC,OAAOU,OAAA,CAAAI,SAAS;GACjB,CAAC,MAAM;IACN,OAAOJ,OAAA,CAAAI,SAAS;;AAEpB;AAPAJ,OAAA,CAAAK,cAAA,GAAAA,cAAA;AA6BA,SAAgBC,wBAAwBA,CAAA;EAGtC,IAAI;IACF;IACA,MAAMC,kBAAkB,GAAGjB,OAAO,CAAC,+BAA+B,CAAC;IACnE,OAAOiB,kBAAkB;GAC1B,CAAC,MAAM;IACN,OAAOhB,eAAe,CACpB,IAAIF,OAAA,CAAAa,2BAA2B,CAC7B,4DAA4D,GAC1D,4EAA4E,CAC/E,CACF;;AAEL;AAfAF,OAAA,CAAAM,wBAAA,GAAAA,wBAAA;AAsBA,SAAgBE,cAAcA,CAAA;EAC5B,IAAI;IACF;IACA,MAAMD,kBAAkB,GAAGjB,OAAO,CAAC,cAAc,CAAC;IAClD,OAAOiB,kBAAkB;GAC1B,CAAC,MAAM;IACN,OAAOhB,eAAe,CACpB,IAAIF,OAAA,CAAAa,2BAA2B,CAC7B,2CAA2C,GACzC,4EAA4E,CAC/E,CACF;;AAEL;AAbAF,OAAA,CAAAQ,cAAA,GAAAA,cAAA;AA8BA,SAAgBC,SAASA,CAAA;EACvB,IAAI;IACF;IACA,MAAMC,KAAK,GAAGpB,OAAO,CAAC,QAAQ,CAAC;IAC/B,OAAOoB,KAAK;GACb,CAAC,OAAOC,KAAK,EAAE;IACd,MAAMjB,YAAY,GAAG,IAAIL,OAAA,CAAAa,2BAA2B,CAClD,oFAAoF,EACpF;MAAES;IAAK,CAAE,CACV;IACD,OAAO;MAAEjB;IAAY,CAAE;;AAE3B;AAZAM,OAAA,CAAAS,SAAA,GAAAA,SAAA;AAkCA,SAAgBG,QAAQA,CAAA;EACtB,IAAI;IACF;IACA,MAAMF,KAAK,GAAGpB,OAAO,CAAC,OAAO,CAAC;IAC9B,OAAOoB,KAAK;GACb,CAAC,OAAOC,KAAK,EAAE;IACd,MAAMjB,YAAY,GAAG,IAAIL,OAAA,CAAAa,2BAA2B,CAClD,yFAAyF,EACzF;MAAES;IAAK,CAAE,CACV;IACD,OAAO;MAAEjB;IAAY,CAAE;;AAE3B;AAZAM,OAAA,CAAAY,QAAA,GAAAA,QAAA;AAuDWZ,OAAA,CAAAa,IAAI,GAAyDtB,eAAe,CACrF,IAAIF,OAAA,CAAAa,2BAA2B,CAC7B,kFAAkF,CACnF,CACF;AAED,IAAI;EACF;EACAF,OAAA,CAAAa,IAAI,GAAGvB,OAAO,CAAC,MAAM,CAAC;CACvB,CAAC,MAAM,EAAE,CAAC;AAEX;AACA,SAAgBwB,0BAA0BA,CAAA;EAGxC,IAAIC,uBAAuB,GAAG,IAAI;EAElC,IAAI;IACF;IACA;IACA;IACAA,uBAAuB,GAAGzB,OAAO,CAAC,2BAA2B,CAAC;GAC/D,CAAC,OAAOqB,KAAK,EAAE;IACd,MAAMjB,YAAY,GAAG,IAAIL,OAAA,CAAAa,2BAA2B,CAClD,sHAAsH,EACtH;MAAES;IAAK,CAAE,CACV;IACD,OAAO;MAAEjB;IAAY,CAAE;;EAGzB,OAAOqB,uBAAuB;AAChC;AAnBAf,OAAA,CAAAc,0BAAA,GAAAA,0BAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}