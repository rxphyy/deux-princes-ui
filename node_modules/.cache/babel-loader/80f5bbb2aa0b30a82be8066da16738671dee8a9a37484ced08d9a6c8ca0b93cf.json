{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _classCallCheck = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _get = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/get.js\").default;\nvar _getPrototypeOf = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/getPrototypeOf.js\").default;\nvar _inherits = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RenameOperation = void 0;\nvar collection_1 = require(\"../collection\");\nvar utils_1 = require(\"../utils\");\nvar command_1 = require(\"./command\");\nvar operation_1 = require(\"./operation\");\n/** @internal */\nvar RenameOperation = /*#__PURE__*/function (_command_1$CommandOpe) {\n  _inherits(RenameOperation, _command_1$CommandOpe);\n  var _super = _createSuper(RenameOperation);\n  function RenameOperation(collection, newName, options) {\n    var _this;\n    _classCallCheck(this, RenameOperation);\n    (0, utils_1.checkCollectionName)(newName);\n    _this = _super.call(this, collection, options);\n    _this.collection = collection;\n    _this.newName = newName;\n    _this.options = options;\n    _this.ns = new utils_1.MongoDBNamespace('admin', '$cmd');\n    return _this;\n  }\n  _createClass(RenameOperation, [{\n    key: \"execute\",\n    value: function () {\n      var _execute = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(server, session) {\n        var renameCollection, toCollection, dropTarget, command;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              // Build the command\n              renameCollection = this.collection.namespace;\n              toCollection = this.collection.s.namespace.withCollection(this.newName).toString();\n              dropTarget = typeof this.options.dropTarget === 'boolean' ? this.options.dropTarget : false;\n              command = {\n                renameCollection: renameCollection,\n                to: toCollection,\n                dropTarget: dropTarget\n              };\n              _context.next = 6;\n              return _get(_getPrototypeOf(RenameOperation.prototype), \"executeCommand\", this).call(this, server, session, command);\n            case 6:\n              return _context.abrupt(\"return\", new collection_1.Collection(this.collection.s.db, this.newName, this.collection.s.options));\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function execute(_x, _x2) {\n        return _execute.apply(this, arguments);\n      }\n      return execute;\n    }()\n  }]);\n  return RenameOperation;\n}(command_1.CommandOperation);\nexports.RenameOperation = RenameOperation;\n(0, operation_1.defineAspects)(RenameOperation, [operation_1.Aspect.WRITE_OPERATION]);","map":{"version":3,"names":["collection_1","require","utils_1","command_1","operation_1","RenameOperation","_command_1$CommandOpe","_inherits","_super","_createSuper","collection","newName","options","_this","_classCallCheck","checkCollectionName","call","ns","MongoDBNamespace","_createClass","key","value","_execute","_asyncToGenerator","_regeneratorRuntime","mark","_callee","server","session","renameCollection","toCollection","dropTarget","command","wrap","_callee$","_context","prev","next","namespace","s","withCollection","toString","to","_get","_getPrototypeOf","prototype","abrupt","Collection","db","stop","execute","_x","_x2","apply","arguments","CommandOperation","exports","defineAspects","Aspect","WRITE_OPERATION"],"sources":["C:\\Users\\raphm\\Documents\\Projects\\youtube-transcript\\youtube-transcript\\node_modules\\mongodb\\src\\operations\\rename.ts"],"sourcesContent":["import type { Document } from '../bson';\nimport { Collection } from '../collection';\nimport type { Server } from '../sdam/server';\nimport type { ClientSession } from '../sessions';\nimport { checkCollectionName, MongoDBNamespace } from '../utils';\nimport { CommandOperation, type CommandOperationOptions } from './command';\nimport { Aspect, defineAspects } from './operation';\n\n/** @public */\nexport interface RenameOptions extends CommandOperationOptions {\n  /** Drop the target name collection if it previously exists. */\n  dropTarget?: boolean;\n  /** Unclear */\n  new_collection?: boolean;\n}\n\n/** @internal */\nexport class RenameOperation extends CommandOperation<Document> {\n  constructor(\n    public collection: Collection,\n    public newName: string,\n    public override options: RenameOptions\n  ) {\n    checkCollectionName(newName);\n    super(collection, options);\n    this.ns = new MongoDBNamespace('admin', '$cmd');\n  }\n\n  override async execute(server: Server, session: ClientSession | undefined): Promise<Collection> {\n    // Build the command\n    const renameCollection = this.collection.namespace;\n    const toCollection = this.collection.s.namespace.withCollection(this.newName).toString();\n    const dropTarget =\n      typeof this.options.dropTarget === 'boolean' ? this.options.dropTarget : false;\n\n    const command = {\n      renameCollection: renameCollection,\n      to: toCollection,\n      dropTarget: dropTarget\n    };\n\n    await super.executeCommand(server, session, command);\n    return new Collection(this.collection.s.db, this.newName, this.collection.s.options);\n  }\n}\n\ndefineAspects(RenameOperation, [Aspect.WRITE_OPERATION]);\n"],"mappings":";;;;;;;;;;;;;;AACA,IAAAA,YAAA,GAAAC,OAAA;AAGA,IAAAC,OAAA,GAAAD,OAAA;AACA,IAAAE,SAAA,GAAAF,OAAA;AACA,IAAAG,WAAA,GAAAH,OAAA;AAUA;AAAA,IACaI,eAAgB,0BAAAC,qBAAA;EAAAC,SAAA,CAAAF,eAAA,EAAAC,qBAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,eAAA;EAC3B,SAAAA,gBACSK,UAAsB,EACtBC,OAAe,EACNC,OAAsB;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAT,eAAA;IAEtC,IAAAH,OAAA,CAAAa,mBAAmB,EAACJ,OAAO,CAAC;IAC5BE,KAAA,GAAAL,MAAA,CAAAQ,IAAA,OAAMN,UAAU,EAAEE,OAAO;IALlBC,KAAA,CAAAH,UAAU,GAAVA,UAAU;IACVG,KAAA,CAAAF,OAAO,GAAPA,OAAO;IACEE,KAAA,CAAAD,OAAO,GAAPA,OAAO;IAIvBC,KAAA,CAAKI,EAAE,GAAG,IAAIf,OAAA,CAAAgB,gBAAgB,CAAC,OAAO,EAAE,MAAM,CAAC;IAAC,OAAAL,KAAA;EAClD;EAACM,YAAA,CAAAd,eAAA;IAAAe,GAAA;IAAAC,KAAA;MAAA,IAAAC,QAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAEQ,SAAAC,QAAcC,MAAc,EAAEC,OAAkC;QAAA,IAAAC,gBAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,OAAA;QAAA,OAAAR,mBAAA,GAAAS,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACvE;cACMR,gBAAgB,GAAG,IAAI,CAACnB,UAAU,CAAC4B,SAAS;cAC5CR,YAAY,GAAG,IAAI,CAACpB,UAAU,CAAC6B,CAAC,CAACD,SAAS,CAACE,cAAc,CAAC,IAAI,CAAC7B,OAAO,CAAC,CAAC8B,QAAQ,EAAE;cAClFV,UAAU,GACd,OAAO,IAAI,CAACnB,OAAO,CAACmB,UAAU,KAAK,SAAS,GAAG,IAAI,CAACnB,OAAO,CAACmB,UAAU,GAAG,KAAK;cAE1EC,OAAO,GAAG;gBACdH,gBAAgB,EAAEA,gBAAgB;gBAClCa,EAAE,EAAEZ,YAAY;gBAChBC,UAAU,EAAEA;eACb;cAAAI,QAAA,CAAAE,IAAA;cAAA,OAAAM,IAAA,CAAAC,eAAA,CAAAvC,eAAA,CAAAwC,SAAA,2BAAA7B,IAAA,OAE0BW,MAAM,EAAEC,OAAO,EAAEI,OAAO;YAAA;cAAA,OAAAG,QAAA,CAAAW,MAAA,WAC5C,IAAI9C,YAAA,CAAA+C,UAAU,CAAC,IAAI,CAACrC,UAAU,CAAC6B,CAAC,CAACS,EAAE,EAAE,IAAI,CAACrC,OAAO,EAAE,IAAI,CAACD,UAAU,CAAC6B,CAAC,CAAC3B,OAAO,CAAC;YAAA;YAAA;cAAA,OAAAuB,QAAA,CAAAc,IAAA;UAAA;QAAA,GAAAvB,OAAA;MAAA,CACrF;MAAA,SAAAwB,QAAAC,EAAA,EAAAC,GAAA;QAAA,OAAA9B,QAAA,CAAA+B,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAJ,OAAA;IAAA;EAAA;EAAA,OAAA7C,eAAA;AAAA,EA1BkCF,SAAA,CAAAoD,gBAA0B;AAA/DC,OAAA,CAAAnD,eAAA,GAAAA,eAAA;AA6BA,IAAAD,WAAA,CAAAqD,aAAa,EAACpD,eAAe,EAAE,CAACD,WAAA,CAAAsD,MAAM,CAACC,eAAe,CAAC,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}