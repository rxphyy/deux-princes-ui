{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _classCallCheck = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _get = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/get.js\").default;\nvar _getPrototypeOf = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/getPrototypeOf.js\").default;\nvar _inherits = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EstimatedDocumentCountOperation = void 0;\nvar command_1 = require(\"./command\");\nvar operation_1 = require(\"./operation\");\n/** @internal */\nvar EstimatedDocumentCountOperation = /*#__PURE__*/function (_command_1$CommandOpe) {\n  _inherits(EstimatedDocumentCountOperation, _command_1$CommandOpe);\n  var _super = _createSuper(EstimatedDocumentCountOperation);\n  function EstimatedDocumentCountOperation(collection) {\n    var _this;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, EstimatedDocumentCountOperation);\n    _this = _super.call(this, collection, options);\n    _this.options = options;\n    _this.collectionName = collection.collectionName;\n    return _this;\n  }\n  _createClass(EstimatedDocumentCountOperation, [{\n    key: \"execute\",\n    value: function () {\n      var _execute = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(server, session) {\n        var cmd, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              cmd = {\n                count: this.collectionName\n              };\n              if (typeof this.options.maxTimeMS === 'number') {\n                cmd.maxTimeMS = this.options.maxTimeMS;\n              }\n              // we check for undefined specifically here to allow falsy values\n              // eslint-disable-next-line no-restricted-syntax\n              if (this.options.comment !== undefined) {\n                cmd.comment = this.options.comment;\n              }\n              _context.next = 5;\n              return _get(_getPrototypeOf(EstimatedDocumentCountOperation.prototype), \"executeCommand\", this).call(this, server, session, cmd);\n            case 5:\n              response = _context.sent;\n              return _context.abrupt(\"return\", (response === null || response === void 0 ? void 0 : response.n) || 0);\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function execute(_x, _x2) {\n        return _execute.apply(this, arguments);\n      }\n      return execute;\n    }()\n  }]);\n  return EstimatedDocumentCountOperation;\n}(command_1.CommandOperation);\nexports.EstimatedDocumentCountOperation = EstimatedDocumentCountOperation;\n(0, operation_1.defineAspects)(EstimatedDocumentCountOperation, [operation_1.Aspect.READ_OPERATION, operation_1.Aspect.RETRYABLE, operation_1.Aspect.CURSOR_CREATING]);","map":{"version":3,"names":["command_1","require","operation_1","EstimatedDocumentCountOperation","_command_1$CommandOpe","_inherits","_super","_createSuper","collection","_this","options","arguments","length","undefined","_classCallCheck","call","collectionName","_createClass","key","value","_execute","_asyncToGenerator","_regeneratorRuntime","mark","_callee","server","session","cmd","response","wrap","_callee$","_context","prev","next","count","maxTimeMS","comment","_get","_getPrototypeOf","prototype","sent","abrupt","n","stop","execute","_x","_x2","apply","CommandOperation","exports","defineAspects","Aspect","READ_OPERATION","RETRYABLE","CURSOR_CREATING"],"sources":["C:\\Users\\raphm\\Documents\\Projects\\youtube-transcript\\youtube-transcript\\node_modules\\mongodb\\src\\operations\\estimated_document_count.ts"],"sourcesContent":["import type { Document } from '../bson';\nimport type { Collection } from '../collection';\nimport type { Server } from '../sdam/server';\nimport type { ClientSession } from '../sessions';\nimport { CommandOperation, type CommandOperationOptions } from './command';\nimport { Aspect, defineAspects } from './operation';\n\n/** @public */\nexport interface EstimatedDocumentCountOptions extends CommandOperationOptions {\n  /**\n   * The maximum amount of time to allow the operation to run.\n   *\n   * This option is sent only if the caller explicitly provides a value. The default is to not send a value.\n   */\n  maxTimeMS?: number;\n}\n\n/** @internal */\nexport class EstimatedDocumentCountOperation extends CommandOperation<number> {\n  override options: EstimatedDocumentCountOptions;\n  collectionName: string;\n\n  constructor(collection: Collection, options: EstimatedDocumentCountOptions = {}) {\n    super(collection, options);\n    this.options = options;\n    this.collectionName = collection.collectionName;\n  }\n\n  override async execute(server: Server, session: ClientSession | undefined): Promise<number> {\n    const cmd: Document = { count: this.collectionName };\n\n    if (typeof this.options.maxTimeMS === 'number') {\n      cmd.maxTimeMS = this.options.maxTimeMS;\n    }\n\n    // we check for undefined specifically here to allow falsy values\n    // eslint-disable-next-line no-restricted-syntax\n    if (this.options.comment !== undefined) {\n      cmd.comment = this.options.comment;\n    }\n\n    const response = await super.executeCommand(server, session, cmd);\n\n    return response?.n || 0;\n  }\n}\n\ndefineAspects(EstimatedDocumentCountOperation, [\n  Aspect.READ_OPERATION,\n  Aspect.RETRYABLE,\n  Aspect.CURSOR_CREATING\n]);\n"],"mappings":";;;;;;;;;;;;;;AAIA,IAAAA,SAAA,GAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AAYA;AAAA,IACaE,+BAAgC,0BAAAC,qBAAA;EAAAC,SAAA,CAAAF,+BAAA,EAAAC,qBAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,+BAAA;EAI3C,SAAAA,gCAAYK,UAAsB,EAA6C;IAAA,IAAAC,KAAA;IAAA,IAA3CC,OAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAyC,EAAE;IAAAG,eAAA,OAAAX,+BAAA;IAC7EM,KAAA,GAAAH,MAAA,CAAAS,IAAA,OAAMP,UAAU,EAAEE,OAAO;IACzBD,KAAA,CAAKC,OAAO,GAAGA,OAAO;IACtBD,KAAA,CAAKO,cAAc,GAAGR,UAAU,CAACQ,cAAc;IAAC,OAAAP,KAAA;EAClD;EAACQ,YAAA,CAAAd,+BAAA;IAAAe,GAAA;IAAAC,KAAA;MAAA,IAAAC,QAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAEQ,SAAAC,QAAcC,MAAc,EAAEC,OAAkC;QAAA,IAAAC,GAAA,EAAAC,QAAA;QAAA,OAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACjEN,GAAG,GAAa;gBAAEO,KAAK,EAAE,IAAI,CAAClB;cAAc,CAAE;cAEpD,IAAI,OAAO,IAAI,CAACN,OAAO,CAACyB,SAAS,KAAK,QAAQ,EAAE;gBAC9CR,GAAG,CAACQ,SAAS,GAAG,IAAI,CAACzB,OAAO,CAACyB,SAAS;;cAGxC;cACA;cACA,IAAI,IAAI,CAACzB,OAAO,CAAC0B,OAAO,KAAKvB,SAAS,EAAE;gBACtCc,GAAG,CAACS,OAAO,GAAG,IAAI,CAAC1B,OAAO,CAAC0B,OAAO;;cACnCL,QAAA,CAAAE,IAAA;cAAA,OAAAI,IAAA,CAAAC,eAAA,CAAAnC,+BAAA,CAAAoC,SAAA,2BAAAxB,IAAA,OAE2CU,MAAM,EAAEC,OAAO,EAAEC,GAAG;YAAA;cAA1DC,QAAQ,GAAAG,QAAA,CAAAS,IAAA;cAAA,OAAAT,QAAA,CAAAU,MAAA,WAEP,CAAAb,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEc,CAAC,KAAI,CAAC;YAAA;YAAA;cAAA,OAAAX,QAAA,CAAAY,IAAA;UAAA;QAAA,GAAAnB,OAAA;MAAA,CACxB;MAAA,SAAAoB,QAAAC,EAAA,EAAAC,GAAA;QAAA,OAAA1B,QAAA,CAAA2B,KAAA,OAAApC,SAAA;MAAA;MAAA,OAAAiC,OAAA;IAAA;EAAA;EAAA,OAAAzC,+BAAA;AAAA,EA1BkDH,SAAA,CAAAgD,gBAAwB;AAA7EC,OAAA,CAAA9C,+BAAA,GAAAA,+BAAA;AA6BA,IAAAD,WAAA,CAAAgD,aAAa,EAAC/C,+BAA+B,EAAE,CAC7CD,WAAA,CAAAiD,MAAM,CAACC,cAAc,EACrBlD,WAAA,CAAAiD,MAAM,CAACE,SAAS,EAChBnD,WAAA,CAAAiD,MAAM,CAACG,eAAe,CACvB,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}