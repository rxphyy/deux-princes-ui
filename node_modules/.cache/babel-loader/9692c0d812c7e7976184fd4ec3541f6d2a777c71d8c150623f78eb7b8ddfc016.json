{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _createForOfIteratorHelper = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\nvar _objectSpread = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nvar _asyncToGenerator = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _classCallCheck = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _inherits = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CollectionsOperation = void 0;\nvar collection_1 = require(\"../collection\");\nvar operation_1 = require(\"./operation\");\n/** @internal */\nvar CollectionsOperation = /*#__PURE__*/function (_operation_1$Abstract) {\n  _inherits(CollectionsOperation, _operation_1$Abstract);\n  var _super = _createSuper(CollectionsOperation);\n  function CollectionsOperation(db, options) {\n    var _this;\n    _classCallCheck(this, CollectionsOperation);\n    _this = _super.call(this, options);\n    _this.options = options;\n    _this.db = db;\n    return _this;\n  }\n  _createClass(CollectionsOperation, [{\n    key: \"execute\",\n    value: function () {\n      var _execute = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(server, session) {\n        var documents, collections, _iterator, _step, name;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.db.listCollections({}, _objectSpread(_objectSpread({}, this.options), {}, {\n                nameOnly: true,\n                readPreference: this.readPreference,\n                session: session\n              })).toArray();\n            case 2:\n              documents = _context.sent;\n              collections = [];\n              _iterator = _createForOfIteratorHelper(documents);\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  name = _step.value.name;\n                  if (!name.includes('$')) {\n                    // Filter collections removing any illegal ones\n                    collections.push(new collection_1.Collection(this.db, name, this.db.s.options));\n                  }\n                }\n                // Return the collection objects\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n              return _context.abrupt(\"return\", collections);\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function execute(_x, _x2) {\n        return _execute.apply(this, arguments);\n      }\n      return execute;\n    }()\n  }]);\n  return CollectionsOperation;\n}(operation_1.AbstractOperation);\nexports.CollectionsOperation = CollectionsOperation;","map":{"version":3,"names":["collection_1","require","operation_1","CollectionsOperation","_operation_1$Abstract","_inherits","_super","_createSuper","db","options","_this","_classCallCheck","call","_createClass","key","value","_execute","_asyncToGenerator","_regeneratorRuntime","mark","_callee","server","session","documents","collections","_iterator","_step","name","wrap","_callee$","_context","prev","next","listCollections","_objectSpread","nameOnly","readPreference","toArray","sent","_createForOfIteratorHelper","s","n","done","includes","push","Collection","err","e","f","abrupt","stop","execute","_x","_x2","apply","arguments","AbstractOperation","exports"],"sources":["C:\\Users\\raphm\\Documents\\Projects\\youtube-transcript\\youtube-transcript\\node_modules\\mongodb\\src\\operations\\collections.ts"],"sourcesContent":["import { Collection } from '../collection';\nimport type { Db } from '../db';\nimport type { Server } from '../sdam/server';\nimport type { ClientSession } from '../sessions';\nimport { AbstractOperation, type OperationOptions } from './operation';\n\nexport interface CollectionsOptions extends OperationOptions {\n  nameOnly?: boolean;\n}\n\n/** @internal */\nexport class CollectionsOperation extends AbstractOperation<Collection[]> {\n  override options: CollectionsOptions;\n  db: Db;\n\n  constructor(db: Db, options: CollectionsOptions) {\n    super(options);\n    this.options = options;\n    this.db = db;\n  }\n\n  override async execute(\n    server: Server,\n    session: ClientSession | undefined\n  ): Promise<Collection[]> {\n    // Let's get the collection names\n    const documents = await this.db\n      .listCollections(\n        {},\n        { ...this.options, nameOnly: true, readPreference: this.readPreference, session }\n      )\n      .toArray();\n    const collections: Collection[] = [];\n    for (const { name } of documents) {\n      if (!name.includes('$')) {\n        // Filter collections removing any illegal ones\n        collections.push(new Collection(this.db, name, this.db.s.options));\n      }\n    }\n    // Return the collection objects\n    return collections;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AAIA,IAAAC,WAAA,GAAAD,OAAA;AAMA;AAAA,IACaE,oBAAqB,0BAAAC,qBAAA;EAAAC,SAAA,CAAAF,oBAAA,EAAAC,qBAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,oBAAA;EAIhC,SAAAA,qBAAYK,EAAM,EAAEC,OAA2B;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAR,oBAAA;IAC7CO,KAAA,GAAAJ,MAAA,CAAAM,IAAA,OAAMH,OAAO;IACbC,KAAA,CAAKD,OAAO,GAAGA,OAAO;IACtBC,KAAA,CAAKF,EAAE,GAAGA,EAAE;IAAC,OAAAE,KAAA;EACf;EAACG,YAAA,CAAAV,oBAAA;IAAAW,GAAA;IAAAC,KAAA;MAAA,IAAAC,QAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAEQ,SAAAC,QACPC,MAAc,EACdC,OAAkC;QAAA,IAAAC,SAAA,EAAAC,WAAA,EAAAC,SAAA,EAAAC,KAAA,EAAAC,IAAA;QAAA,OAAAT,mBAAA,GAAAU,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAE,IAAA;cAAA,OAGV,IAAI,CAACxB,EAAE,CAC5ByB,eAAe,CACd,EAAE,EAAAC,aAAA,CAAAA,aAAA,KACG,IAAI,CAACzB,OAAO;gBAAE0B,QAAQ,EAAE,IAAI;gBAAEC,cAAc,EAAE,IAAI,CAACA,cAAc;gBAAEd,OAAO,EAAPA;cAAO,EAAE,CAClF,CACAe,OAAO,EAAE;YAAA;cALNd,SAAS,GAAAO,QAAA,CAAAQ,IAAA;cAMTd,WAAW,GAAiB,EAAE;cAAAC,SAAA,GAAAc,0BAAA,CACbhB,SAAS;cAAA;gBAAhC,KAAAE,SAAA,CAAAe,CAAA,MAAAd,KAAA,GAAAD,SAAA,CAAAgB,CAAA,IAAAC,IAAA,GAAkC;kBAArBf,IAAI,GAAAD,KAAA,CAAAX,KAAA,CAAJY,IAAI;kBACf,IAAI,CAACA,IAAI,CAACgB,QAAQ,CAAC,GAAG,CAAC,EAAE;oBACvB;oBACAnB,WAAW,CAACoB,IAAI,CAAC,IAAI5C,YAAA,CAAA6C,UAAU,CAAC,IAAI,CAACrC,EAAE,EAAEmB,IAAI,EAAE,IAAI,CAACnB,EAAE,CAACgC,CAAC,CAAC/B,OAAO,CAAC,CAAC;;;gBAGtE;cAAA,SAAAqC,GAAA;gBAAArB,SAAA,CAAAsB,CAAA,CAAAD,GAAA;cAAA;gBAAArB,SAAA,CAAAuB,CAAA;cAAA;cAAA,OAAAlB,QAAA,CAAAmB,MAAA,WACOzB,WAAW;YAAA;YAAA;cAAA,OAAAM,QAAA,CAAAoB,IAAA;UAAA;QAAA,GAAA9B,OAAA;MAAA,CACnB;MAAA,SAAA+B,QAAAC,EAAA,EAAAC,GAAA;QAAA,OAAArC,QAAA,CAAAsC,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAJ,OAAA;IAAA;EAAA;EAAA,OAAAhD,oBAAA;AAAA,EA9BuCD,WAAA,CAAAsD,iBAA+B;AAAzEC,OAAA,CAAAtD,oBAAA,GAAAA,oBAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}