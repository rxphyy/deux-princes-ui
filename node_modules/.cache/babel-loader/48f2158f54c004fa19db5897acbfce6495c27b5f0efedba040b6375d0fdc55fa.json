{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _objectSpread = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nvar _slicedToArray = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _asyncToGenerator = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _classCallCheck = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _inherits = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"C:/Users/raphm/Documents/Projects/youtube-transcript/youtube-transcript/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.IsCappedOperation = void 0;\nvar error_1 = require(\"../error\");\nvar operation_1 = require(\"./operation\");\n/** @internal */\nvar IsCappedOperation = /*#__PURE__*/function (_operation_1$Abstract) {\n  _inherits(IsCappedOperation, _operation_1$Abstract);\n  var _super = _createSuper(IsCappedOperation);\n  function IsCappedOperation(collection, options) {\n    var _this;\n    _classCallCheck(this, IsCappedOperation);\n    _this = _super.call(this, options);\n    _this.options = options;\n    _this.collection = collection;\n    return _this;\n  }\n  _createClass(IsCappedOperation, [{\n    key: \"execute\",\n    value: function () {\n      var _execute = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(server, session) {\n        var _collection$options;\n        var coll, _yield$coll$s$db$list, _yield$coll$s$db$list2, collection;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              coll = this.collection;\n              _context.next = 3;\n              return coll.s.db.listCollections({\n                name: coll.collectionName\n              }, _objectSpread(_objectSpread({}, this.options), {}, {\n                nameOnly: false,\n                readPreference: this.readPreference,\n                session: session\n              })).toArray();\n            case 3:\n              _yield$coll$s$db$list = _context.sent;\n              _yield$coll$s$db$list2 = _slicedToArray(_yield$coll$s$db$list, 1);\n              collection = _yield$coll$s$db$list2[0];\n              if (!(collection == null || collection.options == null)) {\n                _context.next = 8;\n                break;\n              }\n              throw new error_1.MongoAPIError(\"collection \".concat(coll.namespace, \" not found\"));\n            case 8:\n              return _context.abrupt(\"return\", !!((_collection$options = collection.options) !== null && _collection$options !== void 0 && _collection$options.capped));\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function execute(_x, _x2) {\n        return _execute.apply(this, arguments);\n      }\n      return execute;\n    }()\n  }]);\n  return IsCappedOperation;\n}(operation_1.AbstractOperation);\nexports.IsCappedOperation = IsCappedOperation;","map":{"version":3,"names":["error_1","require","operation_1","IsCappedOperation","_operation_1$Abstract","_inherits","_super","_createSuper","collection","options","_this","_classCallCheck","call","_createClass","key","value","_execute","_asyncToGenerator","_regeneratorRuntime","mark","_callee","server","session","_collection$options","coll","_yield$coll$s$db$list","_yield$coll$s$db$list2","wrap","_callee$","_context","prev","next","s","db","listCollections","name","collectionName","_objectSpread","nameOnly","readPreference","toArray","sent","_slicedToArray","MongoAPIError","concat","namespace","abrupt","capped","stop","execute","_x","_x2","apply","arguments","AbstractOperation","exports"],"sources":["C:\\Users\\raphm\\Documents\\Projects\\youtube-transcript\\youtube-transcript\\node_modules\\mongodb\\src\\operations\\is_capped.ts"],"sourcesContent":["import type { Collection } from '../collection';\nimport { MongoAPIError } from '../error';\nimport type { Server } from '../sdam/server';\nimport type { ClientSession } from '../sessions';\nimport { AbstractOperation, type OperationOptions } from './operation';\n\n/** @internal */\nexport class IsCappedOperation extends AbstractOperation<boolean> {\n  override options: OperationOptions;\n  collection: Collection;\n\n  constructor(collection: Collection, options: OperationOptions) {\n    super(options);\n    this.options = options;\n    this.collection = collection;\n  }\n\n  override async execute(server: Server, session: ClientSession | undefined): Promise<boolean> {\n    const coll = this.collection;\n    const [collection] = await coll.s.db\n      .listCollections(\n        { name: coll.collectionName },\n        { ...this.options, nameOnly: false, readPreference: this.readPreference, session }\n      )\n      .toArray();\n    if (collection == null || collection.options == null) {\n      throw new MongoAPIError(`collection ${coll.namespace} not found`);\n    }\n    return !!collection.options?.capped;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;AACA,IAAAA,OAAA,GAAAC,OAAA;AAGA,IAAAC,WAAA,GAAAD,OAAA;AAEA;AAAA,IACaE,iBAAkB,0BAAAC,qBAAA;EAAAC,SAAA,CAAAF,iBAAA,EAAAC,qBAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,iBAAA;EAI7B,SAAAA,kBAAYK,UAAsB,EAAEC,OAAyB;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAR,iBAAA;IAC3DO,KAAA,GAAAJ,MAAA,CAAAM,IAAA,OAAMH,OAAO;IACbC,KAAA,CAAKD,OAAO,GAAGA,OAAO;IACtBC,KAAA,CAAKF,UAAU,GAAGA,UAAU;IAAC,OAAAE,KAAA;EAC/B;EAACG,YAAA,CAAAV,iBAAA;IAAAW,GAAA;IAAAC,KAAA;MAAA,IAAAC,QAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAEQ,SAAAC,QAAcC,MAAc,EAAEC,OAAkC;QAAA,IAAAC,mBAAA;QAAA,IAAAC,IAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAlB,UAAA;QAAA,OAAAU,mBAAA,GAAAS,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACjEP,IAAI,GAAG,IAAI,CAAChB,UAAU;cAAAqB,QAAA,CAAAE,IAAA;cAAA,OACDP,IAAI,CAACQ,CAAC,CAACC,EAAE,CACjCC,eAAe,CACd;gBAAEC,IAAI,EAAEX,IAAI,CAACY;cAAc,CAAE,EAAAC,aAAA,CAAAA,aAAA,KACxB,IAAI,CAAC5B,OAAO;gBAAE6B,QAAQ,EAAE,KAAK;gBAAEC,cAAc,EAAE,IAAI,CAACA,cAAc;gBAAEjB,OAAO,EAAPA;cAAO,EAAE,CACnF,CACAkB,OAAO,EAAE;YAAA;cAAAf,qBAAA,GAAAI,QAAA,CAAAY,IAAA;cAAAf,sBAAA,GAAAgB,cAAA,CAAAjB,qBAAA;cALLjB,UAAU,GAAAkB,sBAAA;cAAA,MAMblB,UAAU,IAAI,IAAI,IAAIA,UAAU,CAACC,OAAO,IAAI,IAAI;gBAAAoB,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAA,MAC5C,IAAI/B,OAAA,CAAA2C,aAAa,eAAAC,MAAA,CAAepB,IAAI,CAACqB,SAAS,eAAY,CAAC;YAAA;cAAA,OAAAhB,QAAA,CAAAiB,MAAA,WAE5D,CAAC,GAAAvB,mBAAA,GAACf,UAAU,CAACC,OAAO,cAAAc,mBAAA,eAAlBA,mBAAA,CAAoBwB,MAAM;YAAA;YAAA;cAAA,OAAAlB,QAAA,CAAAmB,IAAA;UAAA;QAAA,GAAA5B,OAAA;MAAA,CACpC;MAAA,SAAA6B,QAAAC,EAAA,EAAAC,GAAA;QAAA,OAAAnC,QAAA,CAAAoC,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAJ,OAAA;IAAA;EAAA;EAAA,OAAA9C,iBAAA;AAAA,EAtBoCD,WAAA,CAAAoD,iBAA0B;AAAjEC,OAAA,CAAApD,iBAAA,GAAAA,iBAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}